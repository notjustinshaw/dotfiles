_install-p10k() {
  # create local fonts directory
  mkdir -p $HOME/.local/share/fonts

  # copy font files into that directory
  cp -n $HOME/.dotfiles/zsh/p10k-fonts/*ttf $HOME/.local/share/fonts/

  # refresh fonts cache
  fc-cache -f

  # install powerlevel10k
  if [ ! -d ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k ]; then
    git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k
  fi

  # export zsh path
  export ZSH="$HOME/.oh-my-zsh"

  # Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
  # Initialization code that may require console input (password prompts, [y/n]
  # confirmations, etc.) must go above this block; everything else may go below.
  if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
    source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
  fi
}

# run the script
_install-p10k
